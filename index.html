<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>PIX API - Banco BV</title>

<link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css" />

<style>
html, body {
  margin: 0;
  height: 100%;
  font-family: Arial, sans-serif;
  background: #f5f7fa;
}

/* ===== LAYOUT ===== */
.layout {
  display: grid;
  grid-template-columns: 300px 1fr 520px;
  height: 100vh;
}

/* ===== SIDEBAR ===== */
.sidebar {
  background: #fff;
  border-right: 1px solid #ddd;
  padding: 16px;
  overflow-y: auto;
}

.sidebar h3 {
  font-size: 14px;
  color: #002f6c;
}

/* ===== CONTEÚDO CENTRAL ===== */
.content {
  background: #fff;
  overflow-y: auto;
}

.swagger-ui {
  padding: 20px;
}

/* ===== PAINEL DIREITO ===== */
.code-panel {
  background: #0b1220;
  border-left: 1px solid #ddd;
  padding: 16px;
  overflow: hidden; /* SEM SCROLL */
}

/* Wrapper clonado */
.code-panel .swagger-ui {
  padding: 0;
  background: transparent;
}

/* Cabeçalho GET /path */
.code-panel .opblock-summary {
  pointer-events: none;
  margin-bottom: 12px;
}

/* Responses */
.code-panel .responses-wrapper {
  margin-top: 12px;
}

/* Código */
.code-panel pre {
  background: #020617 !important;
  max-width: 100%;
  overflow: hidden; /* SEM SCROLL */
}

/* Remove tudo que não é response */
.code-panel .opblock-description-wrapper,
.code-panel .parameters,
.code-panel .scheme-container,
.code-panel .try-out,
.code-panel table {
  display: none !important;
}

/* Mobile */
@media (max-width: 1200px) {
  .layout {
    grid-template-columns: 260px 1fr;
  }
  .code-panel {
    display: none;
  }
}
</style>
</head>

<body>
<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h3>Documentação</h3>
    <ul id="sidebar-menu"></ul>
    <hr />
    <small>
      Open Banking<br />
      <strong>openbanking@bv.com.br</strong>
    </small>
  </aside>

  <!-- CONTEÚDO -->
  <main class="content">
    <div id="swagger-ui"></div>
  </main>

  <!-- PAINEL DE CÓDIGO -->
  <aside class="code-panel">
    <div id="code-view"></div>
  </aside>

</div>

<script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>

<script>
SwaggerUIBundle({
  url: "https://camargofe.github.io/LwcDocumentacaoAPI/pix.yaml",
  dom_id: "#swagger-ui",
  layout: "BaseLayout"
});

setTimeout(bindEvents, 2000);

function bindEvents() {
  document.querySelectorAll(".opblock-summary").forEach(el => {
    el.addEventListener("click", () => {
      setTimeout(renderCodePanel, 200);
    });
  });
}

function renderCodePanel() {
  const panel = document.getElementById("code-view");
  panel.innerHTML = "";

  const open = document.querySelector(".opblock.is-open");
  if (!open) return;

  const summary = open.querySelector(".opblock-summary")?.cloneNode(true);
  const responses = open.querySelector(".responses-wrapper")?.cloneNode(true);

  if (!summary || !responses) return;

  const wrapper = document.createElement("div");
  wrapper.className = "swagger-ui";

  wrapper.appendChild(summary);
  wrapper.appendChild(responses);

  panel.appendChild(wrapper);
}
</script>

</body>
</html>
