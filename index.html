<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>PIX API - Banco BV</title>

<link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css" />

<style>
html, body {
  margin: 0;
  height: 100%;
  font-family: Arial, sans-serif;
  background: #f5f7fa;
}

/* ===== LAYOUT ===== */
.layout {
  display: grid;
  grid-template-columns: 300px 1fr 520px;
  height: 100vh;
}

/* ===== SIDEBAR ===== */
.sidebar {
  background: #ffffff;
  border-right: 1px solid #ddd;
  padding: 16px;
  overflow-y: auto;
}

.sidebar h3 {
  font-size: 14px;
  color: #002f6c;
  margin-bottom: 10px;
}

.sidebar ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.sidebar li {
  font-size: 13px;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 4px;
}

.sidebar li:hover {
  background: rgba(0,47,108,.1);
}

/* ===== CONTEÚDO CENTRAL ===== */
.content {
  background: #ffffff;
  overflow-y: auto;
}

.swagger-ui {
  padding: 20px;
}

/* ===== PAINEL DIREITO ===== */
.code-panel {
  background: #0b1220;
  border-left: 1px solid #ddd;
  padding: 16px;
  overflow: hidden; /* sem scroll */
  color: #fff;
}

/* Header GET /path */
.code-panel .endpoint-header {
  font-size: 14px;
  font-weight: bold;
  margin-bottom: 12px;
}

/* Responses */
.code-panel .responses-wrapper {
  background: transparent;
}

/* Código */
.code-panel pre {
  background: #020617 !important;
  border-radius: 6px;
}

/* Mobile */
@media (max-width: 1200px) {
  .layout {
    grid-template-columns: 260px 1fr;
  }
  .code-panel {
    display: none;
  }
}
</style>
</head>

<body>
<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h3>Documentação</h3>
    <ul id="sidebar-menu"></ul>
    <hr />
    <small>
      Open Banking<br />
      <strong>openbanking@bv.com.br</strong>
    </small>
  </aside>

  <!-- CONTEÚDO -->
  <main class="content">
    <div id="swagger-ui"></div>
  </main>

  <!-- PAINEL DIREITO -->
  <aside class="code-panel">
    <div id="code-view"></div>
  </aside>

</div>

<script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>

<script>
SwaggerUIBundle({
  url: "https://camargofe.github.io/LwcDocumentacaoAPI/pix.yaml",
  dom_id: "#swagger-ui",
  layout: "BaseLayout"
});

setTimeout(init, 2000);

function init() {
  buildSidebar();
  bindEndpointClicks();
}

/* Sidebar dinâmico */
function buildSidebar() {
  const menu = document.getElementById("sidebar-menu");
  menu.innerHTML = "";

  document.querySelectorAll(".opblock-tag").forEach(tag => {
    const title = tag.querySelector("h3 span");
    if (!title) return;

    const li = document.createElement("li");
    li.textContent = title.textContent.trim();
    li.onclick = () => tag.scrollIntoView({ behavior: "smooth" });
    menu.appendChild(li);
  });
}

/* Clique nos endpoints */
function bindEndpointClicks() {
  document.querySelectorAll(".opblock-summary").forEach(summary => {
    summary.addEventListener("click", () => {
      setTimeout(updateRightPanel, 200);
    });
  });
}

/* Atualiza painel direito */
function updateRightPanel() {
  const panel = document.getElementById("code-view");
  panel.innerHTML = "";

  const open = document.querySelector(".opblock.is-open");
  if (!open) return;

  /* Cabeçalho */
  const method = open.querySelector(".opblock-summary-method")?.textContent || "";
  const path = open.querySelector(".opblock-summary-path")?.textContent || "";

  const header = document.createElement("div");
  header.className = "endpoint-header";
  header.textContent = `${method} ${path}`;

  /* Responses */
  const responses = open.querySelector(".responses-wrapper");
  if (!responses) return;

  const responsesClone = responses.cloneNode(true);

  panel.appendChild(header);
  panel.appendChild(responsesClone);
}
</script>

</body>
</html>
